import React, { useState } from 'react';

const GoFundMeTeaserCreator = () => {
  const [formData, setFormData] = useState({
    campaignTitle: '',
    organizer: '',
    location: '',
    imageUrl: '',
    story: '',
    goal: '',
    raised: '',
    campaignUrl: ''
  });
  
  const [showPreview, setShowPreview] = useState(false);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    setShowPreview(true);
  };

  const fillTestData = () => {
    setFormData({
      campaignTitle: "Help Sarah Beat Cancer",
      organizer: "John Smith",
      location: "Perth, WA",
      imageUrl: "/api/placeholder/400/300",
      story: "Sarah, a loving mother of two, was recently diagnosed with stage 3 breast cancer. The medical bills are mounting, and we're reaching out to our community for support. Every donation, no matter how small, will help Sarah focus on her recovery instead of financial stress.",
      goal: "50000",
      raised: "30000",
      campaignUrl: "https://gofundme.com/example"
    });
  };

  const clearForm = () => {
    setFormData({
      campaignTitle: '',
      organizer: '',
      location: '',
      imageUrl: '',
      story: '',
      goal: '',
      raised: '',
      campaignUrl: ''
    });
    setShowPreview(false);
  };

  const formatCurrency = (amount) => {
    return new Intl.NumberFormat('en-AU', {
      style: 'currency',
      currency: 'AUD'
    }).format(amount);
  };

  const calculateProgress = () => {
    return (parseFloat(formData.raised) / parseFloat(formData.goal)) * 100;
  };

  return (
    <div className="max-w-4xl mx-auto p-4">
      <h1 className="text-2xl font-bold mb-6">GoFundMe Campaign Teaser Creator</h1>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* Form Section */}
        <form onSubmit={handleSubmit} className="bg-white p-6 rounded-lg shadow">
          <div className="space-y-4">
            <div>
              <label className="block font-bold mb-2">Campaign Title</label>
              <input
                type="text"
                name="campaignTitle"
                value={formData.campaignTitle}
                onChange={handleChange}
                className="w-full p-2 border rounded"
                required
              />
            </div>

            <div>
              <label className="block font-bold mb-2">Organizer Name</label>
              <input
                type="text"
                name="organizer"
                value={formData.organizer}
                onChange={handleChange}
                className="w-full p-2 border rounded"
                required
              />
            </div>

            <div>
              <label className="block font-bold mb-2">Location</label>
              <input
                type="text"
                name="location"
                value={formData.location}
                onChange={handleChange}
                className="w-full p-2 border rounded"
                required
              />
            </div>

            <div>
              <label className="block font-bold mb-2">Campaign Image URL</label>
              <input
                type="url"
                name="imageUrl"
                value={formData.imageUrl}
                onChange={handleChange}
                className="w-full p-2 border rounded"
                required
              />
            </div>

            <div>
              <label className="block font-bold mb-2">Campaign Story</label>
              <textarea
                name="story"
                value={formData.story}
                onChange={handleChange}
                className="w-full p-2 border rounded h-32"
                required
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block font-bold mb-2">Goal Amount ($)</label>
                <input
                  type="number"
                  name="goal"
                  value={formData.goal}
                  onChange={handleChange}
                  className="w-full p-2 border rounded"
                  required
                />
              </div>
              <div>
                <label className="block font-bold mb-2">Raised Amount ($)</label>
                <input
                  type="number"
                  name="raised"
                  value={formData.raised}
                  onChange={handleChange}
                  className="w-full p-2 border rounded"
                  required
                />
              </div>
            </div>

            <div>
              <label className="block font-bold mb-2">Campaign URL</label>
              <input
                type="url"
                name="campaignUrl"
                value={formData.campaignUrl}
                onChange={handleChange}
                className="w-full p-2 border rounded"
                required
              />
            </div>

            <div className="flex gap-2">
              <button
                type="submit"
                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
              >
                Preview
              </button>
              <button
                type="button"
                onClick={fillTestData}
                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
              >
                Fill Test Data
              </button>
              <button
                type="button"
                onClick={clearForm}
                className="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
              >
                Clear
              </button>
            </div>
          </div>
        </form>

        {/* Preview Section */}
        {showPreview && (
          <div className="bg-white rounded-lg shadow overflow-hidden">
            <div className="relative">
              <img 
                src={formData.imageUrl} 
                alt={formData.campaignTitle}
                className="w-full h-48 object-cover"
              />
              <div className="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-4 text-white">
                <h2 className="text-xl font-bold">{formData.campaignTitle}</h2>
                <p className="text-sm">
                  {formData.organizer} â€¢ {formData.location}
                </p>
              </div>
            </div>

            <div className="p-4">
              <div className="mb-4">
                <div className="flex justify-between mb-2">
                  <span className="font-bold">{formatCurrency(formData.raised)}</span>
                  <span className="text-gray-600">raised of {formatCurrency(formData.goal)} goal</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className="bg-green-600 rounded-full h-2" 
                    style={{ width: `${Math.min(calculateProgress(), 100)}%` }}
                  ></div>
                </div>
              </div>

              <div className="mb-4">
                <h3 className="font-bold mb-2">Campaign Story</h3>
                <p className="text-gray-700">{formData.story}</p>
              </div>

              <a
                href={formData.campaignUrl}
                target="_blank"
                rel="noopener noreferrer"
                className="block w-full bg-green-600 text-white text-center py-3 font-bold hover:bg-green-700 rounded"
              >
                Donate Now
              </a>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default GoFundMeTeaserCreator;
